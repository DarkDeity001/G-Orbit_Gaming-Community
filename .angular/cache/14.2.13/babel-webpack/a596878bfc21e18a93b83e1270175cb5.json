{"ast":null,"code":"import _asyncToGenerator from \"D:/Gamer`s Orbit/clips/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/modal.service\";\nimport * as i2 from \"src/app/services/clip.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../shared/modal/modal.component\";\nimport * as i5 from \"../../shared/input/input.component\";\nimport * as i6 from \"../../shared/alert/alert.component\";\nimport * as i7 from \"@angular/forms\";\nfunction EditComponent_app_alert_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-alert\", 9)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"color\", ctx_r0.alertColor);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.alertMsg);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"opacity-50\": a0,\n    \"hover:bg-indigo-700\": a1\n  };\n};\nexport class EditComponent {\n  constructor(modal, clipService) {\n    this.modal = modal;\n    this.clipService = clipService;\n    this.activeClip = null;\n    this.inSubmission = false;\n    this.showAlert = false;\n    this.alertColor = 'blue';\n    this.alertMsg = 'Please wait! Updating clip.';\n    this.update = new EventEmitter();\n    this.clipID = new FormControl('', {\n      nonNullable: true\n    });\n    this.title = new FormControl('', {\n      validators: [Validators.required, Validators.minLength(3)],\n      nonNullable: true\n    });\n    this.editForm = new FormGroup({\n      title: this.title,\n      id: this.clipID\n    });\n  }\n  ngOnInit() {\n    this.modal.register('editClip');\n  }\n  ngOnDestroy() {\n    this.modal.unregister('editClip');\n  }\n  ngOnChanges() {\n    if (!this.activeClip) {\n      return;\n    }\n    this.inSubmission = false;\n    this.showAlert = false;\n    this.clipID.setValue(this.activeClip.docID);\n    this.title.setValue(this.activeClip.title);\n  }\n  submit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!_this.activeClip) {\n        return;\n      }\n      _this.inSubmission = true;\n      _this.showAlert = true;\n      _this.alertColor = 'blue';\n      _this.alertMsg = 'Please wait! Updating clip.';\n      try {\n        yield _this.clipService.updateClip(_this.clipID.value, _this.title.value);\n      } catch (e) {\n        _this.inSubmission = false;\n        _this.alertColor = 'red';\n        _this.alertMsg = 'Something went wrong. Try again later';\n        return;\n      }\n      _this.activeClip.title = _this.title.value;\n      _this.update.emit(_this.activeClip);\n      _this.inSubmission = false;\n      _this.alertColor = 'green';\n      _this.alertMsg = 'Success!';\n    })();\n  }\n}\nEditComponent.ɵfac = function EditComponent_Factory(t) {\n  return new (t || EditComponent)(i0.ɵɵdirectiveInject(i1.ModalService), i0.ɵɵdirectiveInject(i2.ClipService));\n};\nEditComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditComponent,\n  selectors: [[\"app-edit\"]],\n  inputs: {\n    activeClip: \"activeClip\"\n  },\n  outputs: {\n    update: \"update\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 12,\n  vars: 8,\n  consts: [[\"modalID\", \"editClip\"], [\"heading\", \"\", 1, \"text-2xl\", \"font-bold\"], [3, \"color\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mt-4\"], [1, \"block\", \"text-xl\", \"mb-4\"], [\"placeholder\", \"Enter Title\", 3, \"control\"], [1, \"mt-4\", \"text-right\"], [\"type\", \"submit\", 1, \"inline-flex\", \"justify-center\", \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"shadow-sm\", \"rounded-md\", \"text-white\", \"bg-indigo-600\", \"focus:outline-none\", 3, \"disabled\", \"ngClass\"], [3, \"color\"]],\n  template: function EditComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-modal\", 0)(1, \"p\", 1);\n      i0.ɵɵtext(2, \"Edit Video\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, EditComponent_app_alert_3_Template, 3, 2, \"app-alert\", 2);\n      i0.ɵɵelementStart(4, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function EditComponent_Template_form_ngSubmit_4_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(8, \"app-input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 7)(10, \"button\", 8);\n      i0.ɵɵtext(11, \" Update \");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.showAlert);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.editForm);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"control\", ctx.title);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.inSubmission)(\"ngClass\", i0.ɵɵpureFunction2(5, _c0, ctx.inSubmission, !ctx.inSubmission));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgIf, i4.ModalComponent, i5.InputComponent, i6.AlertComponent, i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.FormGroupDirective],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlZGl0LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"names":["EventEmitter","FormControl","FormGroup","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ctx_r0","alertColor","ɵɵadvance","ɵɵtextInterpolate","alertMsg","EditComponent","constructor","modal","clipService","activeClip","inSubmission","showAlert","update","clipID","nonNullable","title","validators","required","minLength","editForm","id","ngOnInit","register","ngOnDestroy","unregister","ngOnChanges","setValue","docID","submit","_this","_asyncToGenerator","updateClip","value","e","emit","ɵɵdirectiveInject","i1","ModalService","i2","ClipService","selectors","inputs","outputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","EditComponent_Template","rf","ctx","ɵɵtemplate","EditComponent_app_alert_3_Template","ɵɵlistener","EditComponent_Template_form_ngSubmit_4_listener","ɵɵelement","ɵɵpureFunction2","_c0"],"sources":["D:\\Gamer`s Orbit\\clips\\src\\app\\video\\edit\\edit.component.ts","D:\\Gamer`s Orbit\\clips\\src\\app\\video\\edit\\edit.component.html"],"sourcesContent":["import { \n  Component, OnInit, OnDestroy, Input, OnChanges, Output,\n  EventEmitter\n} from '@angular/core';\nimport { ModalService } from 'src/app/services/modal.service';\nimport IClip from 'src/app/models/clip.model';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ClipService } from 'src/app/services/clip.service';\n\n@Component({\n  selector: 'app-edit',\n  templateUrl: './edit.component.html',\n  styleUrls: ['./edit.component.css']\n})\nexport class EditComponent implements OnInit, OnDestroy, OnChanges {\n  @Input() activeClip: IClip | null = null\n  inSubmission = false\n  showAlert = false\n  alertColor = 'blue'\n  alertMsg = 'Please wait! Updating clip.'\n  @Output() update = new EventEmitter()\n\n  clipID = new FormControl('', {\n    nonNullable: true\n  })\n  title = new FormControl('', {\n    validators: [\n      Validators.required,\n      Validators.minLength(3)\n    ],\n    nonNullable: true\n  })\n  editForm = new FormGroup({\n    title: this.title,\n    id: this.clipID\n  })\n\n  constructor(\n    private modal: ModalService, \n    private clipService: ClipService\n  ) { }\n\n  ngOnInit(): void {\n    this.modal.register('editClip')\n  }\n\n  ngOnDestroy() {\n    this.modal.unregister('editClip')\n  }\n\n  ngOnChanges() {\n    if(!this.activeClip) {\n      return\n    }\n\n    this.inSubmission = false\n    this.showAlert = false\n    this.clipID.setValue(this.activeClip.docID)\n    this.title.setValue(this.activeClip.title)\n  }\n\n  async submit() {\n    if(!this.activeClip) {\n      return\n    }\n\n    this.inSubmission = true\n    this.showAlert = true\n    this.alertColor = 'blue'\n    this.alertMsg = 'Please wait! Updating clip.'\n\n    try {\n      await this.clipService.updateClip(\n        this.clipID.value, this.title.value\n      ) \n    }\n    catch(e) {\n      this.inSubmission = false\n      this.alertColor = 'red'\n      this.alertMsg = 'Something went wrong. Try again later'\n      return\n    }\n\n    this.activeClip.title = this.title.value\n    this.update.emit(this.activeClip)\n\n    this.inSubmission = false\n    this.alertColor = 'green'\n    this.alertMsg = 'Success!'\n  }\n\n}\n","<!-- Edit Modal -->\n<app-modal modalID=\"editClip\">\n  <p class=\"text-2xl font-bold\" heading>Edit Video</p>\n\n  <app-alert *ngIf=\"showAlert\" [color]=\"alertColor\">\n    <p>{{ alertMsg }}</p>\n  </app-alert>\n\n  <!-- Form -->\n  <form [formGroup]=\"editForm\" (ngSubmit)=\"submit()\">\n    <!-- Title -->\n    <div class=\"mt-4\">\n      <label class=\"block text-xl mb-4\">Title</label>\n      <app-input [control]=\"title\" \n        placeholder=\"Enter Title\"></app-input>\n    </div>\n\n    <div class=\"mt-4 text-right\">\n      <button [disabled]=\"inSubmission\"\n        [ngClass]=\"{\n          'opacity-50': inSubmission,\n          'hover:bg-indigo-700': !inSubmission\n        }\"\n        type=\"submit\" \n        class=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm rounded-md text-white bg-indigo-600 focus:outline-none\">\n        Update\n      </button>\n    </div>\n  </form>\n</app-modal>"],"mappings":";AAAA,SAEEA,YAAY,QACP,eAAe;AAGtB,SAASC,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;;;;;;;;;;;ICFjEC,EAAA,CAAAC,cAAA,mBAAkD;IAC7CD,EAAA,CAAAE,MAAA,GAAc;IAAAF,EAAA,CAAAG,YAAA,EAAI;;;;IADMH,EAAA,CAAAI,UAAA,UAAAC,MAAA,CAAAC,UAAA,CAAoB;IAC5CN,EAAA,CAAAO,SAAA,GAAc;IAAdP,EAAA,CAAAQ,iBAAA,CAAAH,MAAA,CAAAI,QAAA,CAAc;;;;;;;;;ADSrB,OAAM,MAAOC,aAAa;EAuBxBC,YACUC,KAAmB,EACnBC,WAAwB;IADxB,KAAAD,KAAK,GAALA,KAAK;IACL,KAAAC,WAAW,GAAXA,WAAW;IAxBZ,KAAAC,UAAU,GAAiB,IAAI;IACxC,KAAAC,YAAY,GAAG,KAAK;IACpB,KAAAC,SAAS,GAAG,KAAK;IACjB,KAAAV,UAAU,GAAG,MAAM;IACnB,KAAAG,QAAQ,GAAG,6BAA6B;IAC9B,KAAAQ,MAAM,GAAG,IAAIrB,YAAY,EAAE;IAErC,KAAAsB,MAAM,GAAG,IAAIrB,WAAW,CAAC,EAAE,EAAE;MAC3BsB,WAAW,EAAE;KACd,CAAC;IACF,KAAAC,KAAK,GAAG,IAAIvB,WAAW,CAAC,EAAE,EAAE;MAC1BwB,UAAU,EAAE,CACVtB,UAAU,CAACuB,QAAQ,EACnBvB,UAAU,CAACwB,SAAS,CAAC,CAAC,CAAC,CACxB;MACDJ,WAAW,EAAE;KACd,CAAC;IACF,KAAAK,QAAQ,GAAG,IAAI1B,SAAS,CAAC;MACvBsB,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBK,EAAE,EAAE,IAAI,CAACP;KACV,CAAC;EAKE;EAEJQ,QAAQA,CAAA;IACN,IAAI,CAACd,KAAK,CAACe,QAAQ,CAAC,UAAU,CAAC;EACjC;EAEAC,WAAWA,CAAA;IACT,IAAI,CAAChB,KAAK,CAACiB,UAAU,CAAC,UAAU,CAAC;EACnC;EAEAC,WAAWA,CAAA;IACT,IAAG,CAAC,IAAI,CAAChB,UAAU,EAAE;MACnB;;IAGF,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,SAAS,GAAG,KAAK;IACtB,IAAI,CAACE,MAAM,CAACa,QAAQ,CAAC,IAAI,CAACjB,UAAU,CAACkB,KAAK,CAAC;IAC3C,IAAI,CAACZ,KAAK,CAACW,QAAQ,CAAC,IAAI,CAACjB,UAAU,CAACM,KAAK,CAAC;EAC5C;EAEMa,MAAMA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACV,IAAG,CAACD,KAAI,CAACpB,UAAU,EAAE;QACnB;;MAGFoB,KAAI,CAACnB,YAAY,GAAG,IAAI;MACxBmB,KAAI,CAAClB,SAAS,GAAG,IAAI;MACrBkB,KAAI,CAAC5B,UAAU,GAAG,MAAM;MACxB4B,KAAI,CAACzB,QAAQ,GAAG,6BAA6B;MAE7C,IAAI;QACF,MAAMyB,KAAI,CAACrB,WAAW,CAACuB,UAAU,CAC/BF,KAAI,CAAChB,MAAM,CAACmB,KAAK,EAAEH,KAAI,CAACd,KAAK,CAACiB,KAAK,CACpC;OACF,CACD,OAAMC,CAAC,EAAE;QACPJ,KAAI,CAACnB,YAAY,GAAG,KAAK;QACzBmB,KAAI,CAAC5B,UAAU,GAAG,KAAK;QACvB4B,KAAI,CAACzB,QAAQ,GAAG,uCAAuC;QACvD;;MAGFyB,KAAI,CAACpB,UAAU,CAACM,KAAK,GAAGc,KAAI,CAACd,KAAK,CAACiB,KAAK;MACxCH,KAAI,CAACjB,MAAM,CAACsB,IAAI,CAACL,KAAI,CAACpB,UAAU,CAAC;MAEjCoB,KAAI,CAACnB,YAAY,GAAG,KAAK;MACzBmB,KAAI,CAAC5B,UAAU,GAAG,OAAO;MACzB4B,KAAI,CAACzB,QAAQ,GAAG,UAAU;IAAA;EAC5B;;;mBA3EWC,aAAa,EAAAV,EAAA,CAAAwC,iBAAA,CAAAC,EAAA,CAAAC,YAAA,GAAA1C,EAAA,CAAAwC,iBAAA,CAAAG,EAAA,CAAAC,WAAA;AAAA;;QAAblC,aAAa;EAAAmC,SAAA;EAAAC,MAAA;IAAAhC,UAAA;EAAA;EAAAiC,OAAA;IAAA9B,MAAA;EAAA;EAAA+B,QAAA,GAAAhD,EAAA,CAAAiD,oBAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCb1BvD,EAAA,CAAAC,cAAA,mBAA8B;MACUD,EAAA,CAAAE,MAAA,iBAAU;MAAAF,EAAA,CAAAG,YAAA,EAAI;MAEpDH,EAAA,CAAAyD,UAAA,IAAAC,kCAAA,uBAEY;MAGZ1D,EAAA,CAAAC,cAAA,cAAmD;MAAtBD,EAAA,CAAA2D,UAAA,sBAAAC,gDAAA;QAAA,OAAYJ,GAAA,CAAAvB,MAAA,EAAQ;MAAA,EAAC;MAEhDjC,EAAA,CAAAC,cAAA,aAAkB;MACkBD,EAAA,CAAAE,MAAA,YAAK;MAAAF,EAAA,CAAAG,YAAA,EAAQ;MAC/CH,EAAA,CAAA6D,SAAA,mBACwC;MAC1C7D,EAAA,CAAAG,YAAA,EAAM;MAENH,EAAA,CAAAC,cAAA,aAA6B;MAQzBD,EAAA,CAAAE,MAAA,gBACF;MAAAF,EAAA,CAAAG,YAAA,EAAS;;;MAtBDH,EAAA,CAAAO,SAAA,GAAe;MAAfP,EAAA,CAAAI,UAAA,SAAAoD,GAAA,CAAAxC,SAAA,CAAe;MAKrBhB,EAAA,CAAAO,SAAA,GAAsB;MAAtBP,EAAA,CAAAI,UAAA,cAAAoD,GAAA,CAAAhC,QAAA,CAAsB;MAIbxB,EAAA,CAAAO,SAAA,GAAiB;MAAjBP,EAAA,CAAAI,UAAA,YAAAoD,GAAA,CAAApC,KAAA,CAAiB;MAKpBpB,EAAA,CAAAO,SAAA,GAAyB;MAAzBP,EAAA,CAAAI,UAAA,aAAAoD,GAAA,CAAAzC,YAAA,CAAyB,YAAAf,EAAA,CAAA8D,eAAA,IAAAC,GAAA,EAAAP,GAAA,CAAAzC,YAAA,GAAAyC,GAAA,CAAAzC,YAAA"},"metadata":{},"sourceType":"module"}